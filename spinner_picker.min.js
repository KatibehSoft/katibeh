class SpinnerPicker{constructor(n,t,i,r=null){var f,u;if(!(n instanceof HTMLCanvasElement))throw"Provided object is not a HTMLCanvasElement";try{if(typeof t!="function"||t(0)==null)throw"";}catch{throw"Provided valueHandler is not valid. Shold be 'string|number = valueHandler(number)'";}f=n.getBoundingClientRect();n.width=f.width*4;n.height=f.height*4;this.canvas=n;this.canvas.setAttribute("dir","rtl");this.ctx=n.getContext("2d");this.blockInput=!1;this.gotoIndex=i!=null&&"index"in i?i.index:0;this.currentIndex=this.gotoIndex;this.animationSpeed=i!=null&&"animation_speed"in i?i.animation_speed:10;this.animationSteps=i!=null&&"animation_steps"in i?i.animation_steps:5;this.currentAnimationStep=this.animationSteps;this.fontColor=i!=null&&"font_color"in i?i.font_color:"#000000";this.selectionColor=i!=null&&"selection_color"in i?i.selection_color:"#000000";this.backColor=i!=null&&"back_color"in i?i.back_color:getComputedStyle(document.body).getPropertyValue("--backgroundcolor");this.font=i!=null&&"font"in i?i.font:"Titr";this.addClickEvent=i!=null&&"onclick"in i?i.onclick:!0;this.addDblclickEvent=i!=null&&"ondblclick"in i?i.ondblclick:!0;this.addKeydownEvent=i!=null&&"onkeydown"in i?i.onkeydown:!0;this.addWheelEvent=i!=null&&"onwheel"in i?i.onwheel:!0;this.addTouchmoveEvent=i!=null&&"ontouchmove"in i?i.ontouchmove:!0;this.addResizeEvent=i!=null&&"onresize"in i?i.onresize:!0;this.valueHandler=t;this.onchanged=r;u=this;this.focused=!1;this.mouseEventHandler=function(n){u.mouseInteraction(n)};this.mouseFocusInEventHandler=function(){u.focused=!0};this.mouseFocusOutEventHandler=function(){u.focused=!1};this.keyEventHandler=function(n){u.keyInteraction(n)};this.lastTouchY=null;this.touchStartHandler=function(n){u.touchInteractionStart(n)};this.touchMoveHandler=function(n){u.touchInteractionMove(n)};this.scrollEventHandler=function(n){u.scrollInteraction(n)};this.resizeEventId=null;this.resizeEventHandler=function(){u.onresize()};this.isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4))?!0:!1;n.addEventListener&&(this.addClickEvent&&!this.isMobile&&n.addEventListener("click",this.mouseEventHandler,!1),this.addDblclickEvent&&!this.isMobile&&n.addEventListener("dblclick",this.mouseEventHandler,!1),this.addKeydownEvent&&!this.isMobile&&(n.addEventListener("mouseover",this.mouseFocusInEventHandler,!1),n.addEventListener("mouseout",this.mouseFocusOutEventHandler,!1),document.addEventListener("keydown",this.keyEventHandler,!1)),this.addWheelEvent&&(n.addEventListener("wheel",this.scrollEventHandler,!1),n.addEventListener("mousewheel",this.scrollEventHandler,!1)),this.addTouchmoveEvent&&this.isMobile&&(n.addEventListener("touchstart",this.touchStartHandler,!1),n.addEventListener("touchmove",this.touchMoveHandler,!1)),this.addResizeEvent&&!this.isMobile&&window.addEventListener("resize",this.resizeEventHandler));this.updateView()}remove(){this.canvas.removeEventListener&&(this.canvas.removeEventListener("click",this.mouseEventHandler),this.canvas.removeEventListener("dblclick",this.mouseEventHandler),this.canvas.removeEventListener("keydown",this.keyEventHandler),this.canvas.removeEventListener("wheel",this.scrollEventHandler),this.canvas.removeEventListener("touchstart",this.touchStartHandler),this.canvas.removeEventListener("touchmove",this.touchMoveHandler),this.canvas.removeEventListener("mousewheel",this.scrollEventHandler),window.removeEventListener("resize",this.resizeEventHandler))}getValue(){return this.valueHandler(this.currentIndex)}setIndex(n){this.blockInput=!0;this.currentAnimationStep=0;this.currentIndex=n;this.gotoIndex=n;this.updateView()}mouseInteraction(n){var t=this.canvas.getBoundingClientRect();(n.clientY-t.top)*(this.canvas.height/t.height)>this.canvas.height/2?this.scrollInteraction({deltaY:-1,ne:!0}):this.scrollInteraction({deltaY:1})}keyInteraction(n){if(this.focused){var t=window.event?window.event.keyCode:n.which;t==83||t==40?this.scrollInteraction({deltaY:-1,ne:!0}):(t==87||t==38)&&this.scrollInteraction({deltaY:1})}}touchInteractionStart(n){this.lastTouchY=(n.touches?n.changedTouches[0]:n).clientY;n.preventDefault()}touchInteractionMove(n){var t=(n.touches?n.changedTouches[0]:n).clientY;this.lastTouchY!=null&&Math.abs(this.lastTouchY-t)>3&&(this.lastTouchY>t?this.scrollInteraction({deltaY:-1,ne:!0}):this.scrollInteraction({deltaY:1}));this.lastTouchY=t;n.preventDefault()}scrollInteraction(n){this.blockInput||(this.blockInput=!0,this.currentAnimationStep=0,n.deltaY>0&&this.valueHandler(this.gotoIndex-1)!=null?(this.gotoIndex--,this.updateView()):n.deltaY<0&&this.valueHandler(this.gotoIndex+1)!=null?(this.gotoIndex++,this.updateView()):this.blockInput=!1);!1 in n&&n.preventDefault()}onresize(){clearTimeout(this.resizeEventId);var n=this;this.resizeEventId=setTimeout(function(){n.updateView()},100)}drawLine(n,t,i,r=null,u=null){var f,e,o;for(this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=t,this.ctx.strokeStyle=i,r!=null&&u!=null&&(this.ctx.shadowColor=u,this.ctx.shadowBlur=r),f=0;f<n.length;f++)e=parseInt(n[f][0]-t/2),o=parseInt(n[f][1]-t/2),f==0?this.ctx.moveTo(e,o):this.ctx.lineTo(e,o);this.ctx.stroke();this.ctx.restore()}drawPolygon(n,t,i=null,r=null,u=null,f=null){this.ctx.save();this.ctx.fillStyle=t;u!=null&&f!=null&&(this.ctx.shadowColor=f,this.ctx.shadowBlur=u);this.ctx.beginPath();this.ctx.moveTo(n[0][0],n[0][1]);for(var e=1;e<n.length;e++)this.ctx.lineTo(n[e][0],n[e][1]);this.ctx.closePath();this.ctx.fill();i!=null&&r!=null&&(this.ctx.lineWidth=border.width,this.ctx.strokeStyle=border.color,this.ctx.stroke());this.ctx.restore()}drawText(n,t,i,r,u=0,f=null){if(this.ctx.save(),this.ctx.font=r,this.ctx.fillStyle=i,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.direction="rtl",f!=null&&f!=0){f=1-f;this.ctx.globalAlpha=f;var e=[.85+f*.15,.3+f*.7];this.ctx.setTransform(e[0],0,0,e[1],t[0]*(1-e[0]),t[1]*(1-e[1]))}u!=0?(this.ctx.translate(t[0],t[1]),this.ctx.rotate(u),this.ctx.fillText(n,0,0)):this.ctx.fillText(n,t[0],t[1]);this.ctx.restore()}updateView(){var n=this.canvas.height/7,e=this.canvas.width/2,u=n*(this.currentAnimationStep/this.animationSteps)*(this.currentIndex<=this.gotoIndex?-1:1),t,i,r,f;for(this.currentAnimationStep==this.animationSteps&&(u=0,this.currentIndex>this.gotoIndex?this.currentIndex--:this.currentIndex<this.gotoIndex&&this.currentIndex++),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawPolygon([[0,0],[this.canvas.width,0],[this.canvas.width,n*3],[0,n*3]],this.backColor),this.drawPolygon([[0,n*4],[this.canvas.width,n*4],[this.canvas.width,this.canvas.height],[0,this.canvas.height]],this.backColor),t=-4;t<=4;t++)i=this.valueHandler(this.currentIndex+t),r=(t+3.55)*n+u,i!=null&&this.drawText(String(i),[e,r],this.fontColor,n-20+"px "+this.font,0,Math.abs(r-3.55*n)/(4*n));if(this.currentAnimationStep!=this.animationSteps)this.currentAnimationStep+=1,f=this,setTimeout(function(){f.updateView()},this.animationSpeed);else if(this.blockInput=!1,this.onchanged!=null)this.onchanged(this.currentIndex)}}